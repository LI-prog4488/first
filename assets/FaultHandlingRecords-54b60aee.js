import{_ as ae,V as ie,A as re,I as de,H as ce,x as ue,Z as pe,$ as me,a0 as ge,r as c,K as T,k as ve,g as r,O as _e,o as g,c as b,a as t,h as s,i as a,E as C,j as d,t as i,F as P,q as H,w as fe,p as A,N as O,n as he}from"./index-45cd1a9a.js";const we={name:"FaultHandlingRecords",components:{Download:ie,Document:re,Refresh:de,DataAnalysis:ce,Timer:ue,Operation:pe,Check:me,Clock:ge},setup(){const I=c(""),e=c(""),z=c(""),l=c(""),x=c(null),y=c(""),R=c(1),v=c(10),u=c(!1),D=c([]),E=c(null),N=c(!1),f=c(!1),F=c("export"),U=c("excel"),h=c([]),K=c(["A栋","B栋","C栋","D栋","停车场","办公楼","园区公共区域"]),_=c([{id:"DEV-E0001",name:"A栋电表1"},{id:"DEV-E0002",name:"B栋电表1"},{id:"DEV-E0003",name:"C栋电表1"},{id:"DEV-E0004",name:"D栋电表1"},{id:"DEV-W0001",name:"A栋水表1"},{id:"DEV-W0002",name:"B栋水表2"},{id:"DEV-G0001",name:"C栋燃气表1"},{id:"DEV-H0001",name:"A栋热力表1"}]),w=T(()=>h.value.filter(o=>{const m=!I.value||o.status===I.value,k=!e.value||o.priority===e.value,J=!z.value||o.zoneName===z.value,oe=!l.value||o.deviceId===l.value,se=!x.value||new Date(o.createdAt)>=new Date(x.value[0])&&new Date(o.createdAt)<=new Date(x.value[1]),ne=!y.value||o.id.toLowerCase().includes(y.value.toLowerCase())||o.title.toLowerCase().includes(y.value.toLowerCase())||o.description.toLowerCase().includes(y.value.toLowerCase())||o.reporter.toLowerCase().includes(y.value.toLowerCase())||o.handler&&o.handler.toLowerCase().includes(y.value.toLowerCase());return m&&k&&J&&oe&&se&&ne})),M=T(()=>{const o=(R.value-1)*v.value,m=o+v.value;return w.value.slice(o,m)}),j=T(()=>h.value.length),p=T(()=>h.value.filter(o=>o.status==="pending").length),V=T(()=>h.value.filter(o=>o.status==="processing").length),W=T(()=>h.value.filter(o=>o.status==="resolved").length),G=T(()=>{const o=h.value.filter(k=>k.status==="resolved"&&k.resolutionTime);return o.length===0?"0":(o.reduce((k,J)=>k+J.resolutionTime,0)/o.length).toFixed(1)}),Z=o=>({high:"高",medium:"中",low:"低"})[o]||o,L=o=>({high:"danger",medium:"warning",low:"success"})[o]||"info",B=o=>({pending:"待处理",processing:"处理中",resolved:"已解决",closed:"已关闭"})[o]||o,q=o=>({pending:"warning",processing:"info",resolved:"success",closed:"danger"})[o]||"info",Y=o=>{if(!o)return"--";const m=new Date(o);return`${m.getFullYear()}-${String(m.getMonth()+1).padStart(2,"0")}-${String(m.getDate()).padStart(2,"0")} ${String(m.getHours()).padStart(2,"0")}:${String(m.getMinutes()).padStart(2,"0")}:${String(m.getSeconds()).padStart(2,"0")}`},n=o=>{D.value=o},S=o=>{E.value={...o},N.value=!0},X=(o="excel")=>{if(w.value.length===0){C.warning("没有可导出的数据");return}u.value=!0,setTimeout(()=>{C.success(`成功导出 ${w.value.length} 条记录为${o.toUpperCase()}格式`),u.value=!1},1500)},$=()=>{u.value=!0,setTimeout(()=>{Q(),C.success("故障记录已刷新"),u.value=!1},1e3)},ee=()=>{if(D.value.length===0){C.warning("请先选择记录");return}F.value==="export"?(u.value=!0,setTimeout(()=>{C.success(`成功导出 ${D.value.length} 条记录为${U.value.toUpperCase()}格式`),u.value=!1,f.value=!1},1500)):F.value==="print"&&(C.info("正在准备打印..."),setTimeout(()=>{C.success(`已准备好 ${D.value.length} 条记录用于打印`),f.value=!1},800))},te=o=>{v.value=o,R.value=1},le=o=>{R.value=o},Q=()=>{const o=new Date;h.value=[{id:"FAULT-20231101-001",title:"A栋3层电表通信故障",description:"A栋3层电表设备无法正常与系统通信，无法获取实时用电数据。故障发生在今天上午9点，影响了A栋3层的用电监测。",priority:"high",type:"设备通信故障",zoneName:"A栋",deviceName:"A栋电表1",deviceId:"DEV-E0001",status:"resolved",reporter:"李工",handler:"王工",createdAt:new Date(o.getTime()-12*60*60*1e3).toISOString(),resolvedAt:new Date(o.getTime()-8*60*60*1e3).toISOString(),resolutionTime:4,remark:"通信模块老化导致",processSteps:[{title:"故障申报",description:"系统监测到设备离线，自动创建故障工单",operator:"系统",time:new Date(o.getTime()-12*60*60*1e3).toISOString()},{title:"工单分配",description:"故障工单已分配给王工处理",operator:"管理员",time:new Date(o.getTime()-11.5*60*60*1e3).toISOString()},{title:"现场检查",description:"到达现场后检查设备状态，确认通信模块故障",operator:"王工",time:new Date(o.getTime()-10*60*60*1e3).toISOString()},{title:"设备维修",description:"更换了故障的通信模块",operator:"王工",time:new Date(o.getTime()-9*60*60*1e3).toISOString()},{title:"测试验证",description:"设备恢复通信，数据正常上传",operator:"王工",time:new Date(o.getTime()-8*60*60*1e3).toISOString()}],resolution:{result:"更换了电表通信模块",rootCause:"通信模块老化，信号传输不稳定",prevention:"建议对所有超过3年的设备进行通信模块检查"},attachments:[{name:"故障现场照片.jpg",url:"#"},{name:"维修记录单.pdf",url:"#"}]},{id:"FAULT-20231101-002",title:"B栋水表数据异常",description:"B栋水表2号设备上报的数据出现异常波动，数值忽高忽低，与实际用水量不符。",priority:"medium",type:"数据异常",zoneName:"B栋",deviceName:"B栋水表2",deviceId:"DEV-W0002",status:"processing",reporter:"系统",handler:"赵工",createdAt:new Date(o.getTime()-5*60*60*1e3).toISOString(),resolvedAt:null,resolutionTime:null,remark:"正在排查传感器问题",processSteps:[{title:"故障申报",description:"系统检测到数据异常，自动创建故障工单",operator:"系统",time:new Date(o.getTime()-5*60*60*1e3).toISOString()},{title:"工单分配",description:"故障工单已分配给赵工处理",operator:"管理员",time:new Date(o.getTime()-4.5*60*60*1e3).toISOString()},{title:"初步分析",description:"数据分析显示可能是传感器故障或管道中有气泡",operator:"赵工",time:new Date(o.getTime()-4*60*60*1e3).toISOString()},{title:"现场检查",description:"正在现场检查设备和管道情况",operator:"赵工",time:new Date(o.getTime()-3*60*60*1e3).toISOString()}],resolution:{},attachments:[]},{id:"FAULT-20231101-003",title:"C栋燃气表读数偏高",description:"C栋燃气表1号设备读数明显高于历史同期水平，可能存在表具故障或燃气泄漏风险。",priority:"high",type:"读数异常",zoneName:"C栋",deviceName:"C栋燃气表1",deviceId:"DEV-G0001",status:"pending",reporter:"张工",handler:null,createdAt:new Date(o.getTime()-2*60*60*1e3).toISOString(),resolvedAt:null,resolutionTime:null,remark:"需紧急处理",processSteps:[{title:"故障申报",description:"张工巡检时发现读数异常，手动创建故障工单",operator:"张工",time:new Date(o.getTime()-2*60*60*1e3).toISOString()}],resolution:{},attachments:[{name:"读数记录截图.png",url:"#"}]},{id:"FAULT-20231101-004",title:"停车场电表数据丢失",description:"停车场电表1号设备今天凌晨2点到4点的数据丢失，无法查看该时段的用电情况。",priority:"low",type:"数据丢失",zoneName:"停车场",deviceName:"停车场电表1",deviceId:"DEV-E0006",status:"resolved",reporter:"系统",handler:"刘工",createdAt:new Date(o.getTime()-18*60*60*1e3).toISOString(),resolvedAt:new Date(o.getTime()-16*60*60*1e3).toISOString(),resolutionTime:2,remark:"设备重启后恢复正常",processSteps:[{title:"故障申报",description:"系统检测到数据缺失，自动创建故障工单",operator:"系统",time:new Date(o.getTime()-18*60*60*1e3).toISOString()},{title:"工单分配",description:"故障工单已分配给刘工处理",operator:"管理员",time:new Date(o.getTime()-17.5*60*60*1e3).toISOString()},{title:"远程处理",description:"远程重启设备后，数据恢复正常传输",operator:"刘工",time:new Date(o.getTime()-16*60*60*1e3).toISOString()}],resolution:{result:"远程重启设备",rootCause:"设备固件临时故障，自动恢复",prevention:"建议设置定期自动重启机制"},attachments:[]},{id:"FAULT-20231101-005",title:"D栋电表1号设备离线",description:"D栋电表1号设备完全离线，无法连接到系统，影响整栋楼的用电监控。",priority:"high",type:"设备离线",zoneName:"D栋",deviceName:"D栋电表1",deviceId:"DEV-E0004",status:"processing",reporter:"系统",handler:"陈工",createdAt:new Date(o.getTime()-1*60*60*1e3).toISOString(),resolvedAt:null,resolutionTime:null,remark:"正在前往现场",processSteps:[{title:"故障申报",description:"系统检测到设备离线超过30分钟，自动创建故障工单",operator:"系统",time:new Date(o.getTime()-1*60*60*1e3).toISOString()},{title:"工单分配",description:"故障工单已分配给陈工处理",operator:"管理员",time:new Date(o.getTime()-55*60*1e3).toISOString()},{title:"响应处理",description:"已接收到工单，正在前往现场处理",operator:"陈工",time:new Date(o.getTime()-45*60*1e3).toISOString()}],resolution:{},attachments:[]}]};return ve(()=>{Q()}),{statusFilter:I,priorityFilter:e,zoneFilter:z,deviceFilter:l,dateRangeFilter:x,searchKeyword:y,currentPage:R,pageSize:v,loading:u,selectedRecords:D,selectedRecord:E,recordDetailDialogVisible:N,bulkOperationDialogVisible:f,bulkOperationType:F,exportFormat:U,faultRecords:h,zones:K,devices:_,filteredRecords:w,paginatedRecords:M,totalFaultCount:j,pendingFaultCount:p,processingFaultCount:V,resolvedFaultCount:W,avgResolutionTime:G,getPriorityText:Z,getPriorityTagType:L,getStatusText:B,getStatusTagType:q,formatDateTime:Y,handleSelectionChange:n,viewRecordDetail:S,exportRecords:X,refreshRecords:$,confirmBulkOperation:ee,handleSizeChange:te,handleCurrentChange:le}}},be={class:"fault-records"},ye={class:"page-header"},De={class:"header-actions"},Se={class:"stats-section"},Te={class:"stat-content"},Ce={class:"stat-number"},Re={class:"stat-icon success"},Ve={class:"stat-content"},ke={class:"stat-number"},xe={class:"stat-icon warning"},Fe={class:"stat-content"},Ae={class:"stat-number"},Oe={class:"stat-icon info"},Ie={class:"stat-content"},ze={class:"stat-number"},Ee={class:"stat-icon success"},Ne={class:"stat-content"},Ue={class:"stat-number"},Le={class:"stat-icon primary"},Be={class:"toolbar"},Pe={class:"filter-section"},He={class:"search-section"},Ke=["title"],Me={class:"pagination-wrapper"},je={key:0,class:"record-detail"},We={class:"detail-header"},Ge={class:"record-title"},Ze={class:"detail-info"},qe={class:"info-grid"},Ye={class:"info-item"},Je={class:"info-item"},Qe={class:"info-item"},Xe={class:"info-item"},$e={class:"info-item"},et={class:"info-item"},tt={class:"info-item"},lt={class:"info-item"},ot={class:"info-item"},st={class:"info-item"},nt={class:"info-item"},at={class:"info-item"},it={class:"detail-content"},rt={class:"fault-description"},dt={class:"detail-content"},ct={class:"process-steps"},ut={class:"step-timeline"},pt={key:0,class:"step-line"},mt={class:"step-content"},gt={class:"step-header"},vt={class:"step-title"},_t={class:"step-time"},ft={class:"step-description"},ht={class:"step-operator"},wt={key:0,class:"detail-content"},bt={class:"resolution-result"},yt={class:"result-item"},Dt={class:"result-value"},St={class:"result-item"},Tt={class:"result-value"},Ct={class:"result-item"},Rt={class:"result-value"},Vt={key:1,class:"detail-content"},kt={class:"attachments-list"},xt={class:"dialog-footer"},Ft={class:"bulk-operation-content"},At={class:"operation-info"},Ot={class:"highlight"},It={class:"dialog-footer"};function zt(I,e,z,l,x,y){const R=r("Download"),v=r("el-icon"),u=r("el-button"),D=r("Document"),E=r("Refresh"),N=r("DataAnalysis"),f=r("el-card"),F=r("Timer"),U=r("Operation"),h=r("Check"),K=r("Clock"),_=r("el-option"),w=r("el-select"),M=r("el-date-picker"),j=r("el-input"),p=r("el-table-column"),V=r("el-tag"),W=r("el-table"),G=r("el-pagination"),Z=r("el-link"),L=r("el-dialog"),B=r("el-radio"),q=r("el-radio-group"),Y=_e("loading");return g(),b("div",be,[t("div",ye,[e[19]||(e[19]=t("h1",null,"故障处理记录",-1)),t("div",De,[s(u,{onClick:e[0]||(e[0]=n=>l.exportRecords("excel"))},{default:a(()=>[s(v,null,{default:a(()=>[s(R)]),_:1}),e[16]||(e[16]=d(" 导出Excel ",-1))]),_:1}),s(u,{onClick:e[1]||(e[1]=n=>l.exportRecords("pdf"))},{default:a(()=>[s(v,null,{default:a(()=>[s(D)]),_:1}),e[17]||(e[17]=d(" 导出PDF ",-1))]),_:1}),s(u,{onClick:l.refreshRecords},{default:a(()=>[s(v,null,{default:a(()=>[s(E)]),_:1}),e[18]||(e[18]=d(" 刷新 ",-1))]),_:1},8,["onClick"])])]),t("div",Se,[s(f,{class:"stat-card"},{default:a(()=>[t("div",Te,[t("div",Ce,i(l.totalFaultCount),1),e[20]||(e[20]=t("div",{class:"stat-label"},"总故障数",-1))]),t("div",Re,[s(v,{class:"icon-large"},{default:a(()=>[s(N)]),_:1})])]),_:1}),s(f,{class:"stat-card"},{default:a(()=>[t("div",Ve,[t("div",ke,i(l.pendingFaultCount),1),e[21]||(e[21]=t("div",{class:"stat-label"},"待处理",-1))]),t("div",xe,[s(v,{class:"icon-large"},{default:a(()=>[s(F)]),_:1})])]),_:1}),s(f,{class:"stat-card"},{default:a(()=>[t("div",Fe,[t("div",Ae,i(l.processingFaultCount),1),e[22]||(e[22]=t("div",{class:"stat-label"},"处理中",-1))]),t("div",Oe,[s(v,{class:"icon-large"},{default:a(()=>[s(U)]),_:1})])]),_:1}),s(f,{class:"stat-card"},{default:a(()=>[t("div",Ie,[t("div",ze,i(l.resolvedFaultCount),1),e[23]||(e[23]=t("div",{class:"stat-label"},"已解决",-1))]),t("div",Ee,[s(v,{class:"icon-large"},{default:a(()=>[s(h)]),_:1})])]),_:1}),s(f,{class:"stat-card"},{default:a(()=>[t("div",Ne,[t("div",Ue,i(l.avgResolutionTime)+"h",1),e[24]||(e[24]=t("div",{class:"stat-label"},"平均解决时间",-1))]),t("div",Le,[s(v,{class:"icon-large"},{default:a(()=>[s(K)]),_:1})])]),_:1})]),t("div",Be,[t("div",Pe,[s(w,{modelValue:l.statusFilter,"onUpdate:modelValue":e[2]||(e[2]=n=>l.statusFilter=n),placeholder:"处理状态",clearable:"",style:{width:"120px","margin-right":"15px"}},{default:a(()=>[s(_,{label:"待处理",value:"pending"}),s(_,{label:"处理中",value:"processing"}),s(_,{label:"已解决",value:"resolved"}),s(_,{label:"已关闭",value:"closed"})]),_:1},8,["modelValue"]),s(w,{modelValue:l.priorityFilter,"onUpdate:modelValue":e[3]||(e[3]=n=>l.priorityFilter=n),placeholder:"优先级",clearable:"",style:{width:"120px","margin-right":"15px"}},{default:a(()=>[s(_,{label:"高",value:"high"}),s(_,{label:"中",value:"medium"}),s(_,{label:"低",value:"low"})]),_:1},8,["modelValue"]),s(w,{modelValue:l.zoneFilter,"onUpdate:modelValue":e[4]||(e[4]=n=>l.zoneFilter=n),placeholder:"故障区域",clearable:"",style:{width:"150px","margin-right":"15px"}},{default:a(()=>[(g(!0),b(P,null,H(l.zones,n=>(g(),A(_,{key:n,label:n,value:n},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),s(w,{modelValue:l.deviceFilter,"onUpdate:modelValue":e[5]||(e[5]=n=>l.deviceFilter=n),placeholder:"相关设备",clearable:"",style:{width:"180px","margin-right":"15px"}},{default:a(()=>[(g(!0),b(P,null,H(l.devices,n=>(g(),A(_,{key:n.id,label:n.name,value:n.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),s(M,{modelValue:l.dateRangeFilter,"onUpdate:modelValue":e[6]||(e[6]=n=>l.dateRangeFilter=n),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",style:{width:"280px"}},null,8,["modelValue"])]),t("div",He,[s(j,{modelValue:l.searchKeyword,"onUpdate:modelValue":e[7]||(e[7]=n=>l.searchKeyword=n),placeholder:"搜索故障编号、描述、处理人","prefix-icon":"el-icon-search",clearable:"",style:{width:"300px"}},null,8,["modelValue"])])]),s(f,{class:"records-table-card"},{default:a(()=>[fe((g(),A(W,{data:l.paginatedRecords,style:{width:"100%"},border:"",onSelectionChange:l.handleSelectionChange},{default:a(()=>[s(p,{type:"selection",width:"55"}),s(p,{prop:"id",label:"故障编号",width:"180",sortable:""}),s(p,{prop:"title",label:"故障标题","min-width":"200"},{default:a(n=>[t("div",{class:"fault-title",title:n.row.title},i(n.row.title),9,Ke)]),_:1}),s(p,{prop:"priority",label:"优先级",width:"80",align:"center"},{default:a(n=>[s(V,{type:l.getPriorityTagType(n.row.priority),size:"small"},{default:a(()=>[d(i(l.getPriorityText(n.row.priority)),1)]),_:2},1032,["type"])]),_:1}),s(p,{prop:"zoneName",label:"故障区域",width:"120"}),s(p,{prop:"deviceName",label:"相关设备",width:"150"}),s(p,{prop:"status",label:"处理状态",width:"100",align:"center"},{default:a(n=>[s(V,{type:l.getStatusTagType(n.row.status)},{default:a(()=>[d(i(l.getStatusText(n.row.status)),1)]),_:2},1032,["type"])]),_:1}),s(p,{prop:"reporter",label:"申报人",width:"100"}),s(p,{prop:"handler",label:"处理人",width:"100"},{default:a(n=>[d(i(n.row.handler||"--"),1)]),_:1}),s(p,{prop:"createdAt",label:"申报时间",width:"160",align:"center",sortable:""},{default:a(n=>[d(i(l.formatDateTime(n.row.createdAt)),1)]),_:1}),s(p,{prop:"resolvedAt",label:"解决时间",width:"160",align:"center",sortable:""},{default:a(n=>[d(i(n.row.resolvedAt?l.formatDateTime(n.row.resolvedAt):"--"),1)]),_:1}),s(p,{prop:"resolutionTime",label:"处理时长",width:"100",align:"center"},{default:a(n=>[d(i(n.row.resolutionTime?n.row.resolutionTime+"h":"--"),1)]),_:1}),s(p,{label:"操作",width:"120",fixed:"right"},{default:a(n=>[s(u,{size:"small",type:"primary",onClick:S=>l.viewRecordDetail(n.row)},{default:a(()=>[...e[25]||(e[25]=[d("详情",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data","onSelectionChange"])),[[Y,l.loading]]),t("div",Me,[s(G,{"current-page":l.currentPage,"onUpdate:currentPage":e[8]||(e[8]=n=>l.currentPage=n),"page-size":l.pageSize,"onUpdate:pageSize":e[9]||(e[9]=n=>l.pageSize=n),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:l.filteredRecords.length,onSizeChange:l.handleSizeChange,onCurrentChange:l.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])]),_:1}),s(L,{modelValue:l.recordDetailDialogVisible,"onUpdate:modelValue":e[11]||(e[11]=n=>l.recordDetailDialogVisible=n),title:"故障处理详情",width:"700px"},{footer:a(()=>[t("span",xt,[s(u,{onClick:e[10]||(e[10]=n=>l.recordDetailDialogVisible=!1)},{default:a(()=>[...e[45]||(e[45]=[d("关闭",-1)])]),_:1})])]),default:a(()=>[l.selectedRecord?(g(),b("div",je,[t("div",We,[t("h2",Ge,i(l.selectedRecord.title),1),s(V,{type:l.getStatusTagType(l.selectedRecord.status)},{default:a(()=>[d(i(l.getStatusText(l.selectedRecord.status)),1)]),_:1},8,["type"])]),t("div",Ze,[t("div",qe,[t("div",Ye,[e[26]||(e[26]=t("span",{class:"info-label"},"故障编号：",-1)),t("span",null,i(l.selectedRecord.id),1)]),t("div",Je,[e[27]||(e[27]=t("span",{class:"info-label"},"优先级：",-1)),s(V,{type:l.getPriorityTagType(l.selectedRecord.priority),size:"small"},{default:a(()=>[d(i(l.getPriorityText(l.selectedRecord.priority)),1)]),_:1},8,["type"])]),t("div",Qe,[e[28]||(e[28]=t("span",{class:"info-label"},"故障类型：",-1)),t("span",null,i(l.selectedRecord.type),1)]),t("div",Xe,[e[29]||(e[29]=t("span",{class:"info-label"},"故障区域：",-1)),t("span",null,i(l.selectedRecord.zoneName),1)]),t("div",$e,[e[30]||(e[30]=t("span",{class:"info-label"},"相关设备：",-1)),t("span",null,i(l.selectedRecord.deviceName),1)]),t("div",et,[e[31]||(e[31]=t("span",{class:"info-label"},"设备ID：",-1)),t("span",null,i(l.selectedRecord.deviceId),1)]),t("div",tt,[e[32]||(e[32]=t("span",{class:"info-label"},"申报人：",-1)),t("span",null,i(l.selectedRecord.reporter),1)]),t("div",lt,[e[33]||(e[33]=t("span",{class:"info-label"},"处理人：",-1)),t("span",null,i(l.selectedRecord.handler||"--"),1)]),t("div",ot,[e[34]||(e[34]=t("span",{class:"info-label"},"申报时间：",-1)),t("span",null,i(l.formatDateTime(l.selectedRecord.createdAt)),1)]),t("div",st,[e[35]||(e[35]=t("span",{class:"info-label"},"解决时间：",-1)),t("span",null,i(l.selectedRecord.resolvedAt?l.formatDateTime(l.selectedRecord.resolvedAt):"--"),1)]),t("div",nt,[e[36]||(e[36]=t("span",{class:"info-label"},"处理时长：",-1)),t("span",null,i(l.selectedRecord.resolutionTime?l.selectedRecord.resolutionTime+" 小时":"--"),1)]),t("div",at,[e[37]||(e[37]=t("span",{class:"info-label"},"备注：",-1)),t("span",null,i(l.selectedRecord.remark||"--"),1)])])]),t("div",it,[e[38]||(e[38]=t("h3",null,"故障描述",-1)),t("div",rt,i(l.selectedRecord.description),1)]),t("div",dt,[e[39]||(e[39]=t("h3",null,"处理过程",-1)),t("div",ct,[(g(!0),b(P,null,H(l.selectedRecord.processSteps,(n,S)=>(g(),b("div",{key:S,class:"step-item"},[t("div",ut,[t("div",{class:he(["step-dot",{active:S===l.selectedRecord.processSteps.length-1}])},null,2),S<l.selectedRecord.processSteps.length-1?(g(),b("div",pt)):O("",!0)]),t("div",mt,[t("div",gt,[t("span",vt,i(n.title),1),t("span",_t,i(l.formatDateTime(n.time)),1)]),t("div",ft,i(n.description),1),t("div",ht,"操作人："+i(n.operator),1)])]))),128))])]),l.selectedRecord.status==="resolved"?(g(),b("div",wt,[e[43]||(e[43]=t("h3",null,"处理结果",-1)),t("div",bt,[t("div",yt,[e[40]||(e[40]=t("span",{class:"result-label"},"解决方案：",-1)),t("span",Dt,i(l.selectedRecord.resolution.result),1)]),t("div",St,[e[41]||(e[41]=t("span",{class:"result-label"},"根本原因：",-1)),t("span",Tt,i(l.selectedRecord.resolution.rootCause),1)]),t("div",Ct,[e[42]||(e[42]=t("span",{class:"result-label"},"预防措施：",-1)),t("span",Rt,i(l.selectedRecord.resolution.prevention),1)])])])):O("",!0),l.selectedRecord.attachments&&l.selectedRecord.attachments.length>0?(g(),b("div",Vt,[e[44]||(e[44]=t("h3",null,"附件",-1)),t("div",kt,[(g(!0),b(P,null,H(l.selectedRecord.attachments,(n,S)=>(g(),A(Z,{key:S,href:n.url,target:"_blank",type:"primary",style:{"margin-right":"10px","margin-bottom":"10px"}},{default:a(()=>[s(v,null,{default:a(()=>[s(D)]),_:1}),d(" "+i(n.name),1)]),_:2},1032,["href"]))),128))])])):O("",!0)])):O("",!0)]),_:1},8,["modelValue"]),s(L,{modelValue:l.bulkOperationDialogVisible,"onUpdate:modelValue":e[15]||(e[15]=n=>l.bulkOperationDialogVisible=n),title:"批量操作",width:"400px"},{footer:a(()=>[t("span",It,[s(u,{onClick:e[14]||(e[14]=n=>l.bulkOperationDialogVisible=!1)},{default:a(()=>[...e[50]||(e[50]=[d("取消",-1)])]),_:1}),s(u,{type:"primary",onClick:l.confirmBulkOperation},{default:a(()=>[...e[51]||(e[51]=[d("确认",-1)])]),_:1},8,["onClick"])])]),default:a(()=>[t("div",Ft,[t("p",At,[e[46]||(e[46]=d(" 您正在对 ",-1)),t("span",Ot,i(l.selectedRecords.length),1),e[47]||(e[47]=d(" 条记录执行操作 ",-1))]),s(q,{modelValue:l.bulkOperationType,"onUpdate:modelValue":e[12]||(e[12]=n=>l.bulkOperationType=n),style:{display:"block","margin-top":"20px"}},{default:a(()=>[s(B,{value:"export"},{default:a(()=>[...e[48]||(e[48]=[d("导出选中记录",-1)])]),_:1}),s(B,{value:"print"},{default:a(()=>[...e[49]||(e[49]=[d("打印选中记录",-1)])]),_:1})]),_:1},8,["modelValue"]),l.bulkOperationType==="export"?(g(),A(w,{key:0,modelValue:l.exportFormat,"onUpdate:modelValue":e[13]||(e[13]=n=>l.exportFormat=n),placeholder:"导出格式",style:{width:"100%","margin-top":"15px"}},{default:a(()=>[s(_,{label:"Excel",value:"excel"}),s(_,{label:"PDF",value:"pdf"})]),_:1},8,["modelValue"])):O("",!0)])]),_:1},8,["modelValue"])])}const Nt=ae(we,[["render",zt],["__scopeId","data-v-b0de72de"]]);export{Nt as default};
