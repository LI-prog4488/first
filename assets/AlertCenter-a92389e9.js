import{_ as ve,W as pe,I as fe,D as _e,X as he,Y as ye,s as we,r as h,f as X,K as z,k as Ae,g as c,O as be,o as p,c as S,a,h as s,i as n,E as C,P as Se,j as u,t as d,w as Te,p as F,n as Ce,N as O,U as J,F as Q,q as $}from"./index-45cd1a9a.js";const De={name:"AlertCenter",components:{AlarmClock:pe,Refresh:fe,Warning:_e,CircleClose:he,InfoFilled:ye,Bell:we},setup(){const P=h(""),t=h(""),B=h(""),e=h(null),D=h(""),M=h(1),E=h(10),y=h(!1),m=h([]),w=h(null),k=h(!1),T=h(!1),i=h([]),f=X({status:"processing",handler:"",note:""}),A=X({status:"processing",handler:"",note:""}),g=z(()=>i.value.filter(l=>{const r=!P.value||l.severity===P.value,_=!t.value||l.status===t.value,q=!B.value||l.type===B.value,ge=!e.value||new Date(l.createdAt)>=new Date(e.value[0])&&new Date(l.createdAt)<=new Date(e.value[1]),me=!D.value||l.title.toLowerCase().includes(D.value.toLowerCase())||l.description.toLowerCase().includes(D.value.toLowerCase())||l.zoneName.toLowerCase().includes(D.value.toLowerCase())||l.deviceName.toLowerCase().includes(D.value.toLowerCase())||l.deviceId.toLowerCase().includes(D.value.toLowerCase());return r&&_&&q&&ge&&me})),x=z(()=>i.value.filter(l=>l.severity==="critical"&&l.status==="pending").length),W=z(()=>i.value.filter(l=>l.severity==="warning"&&l.status==="pending").length),R=z(()=>i.value.filter(l=>l.severity==="info"&&l.status==="pending").length),v=z(()=>{const l=new Date;return l.setHours(0,0,0,0),i.value.filter(r=>new Date(r.createdAt)>=l).length}),b=l=>({critical:"紧急",warning:"警告",info:"提示"})[l]||l,L=l=>({critical:"danger",warning:"warning",info:"info"})[l]||"info",K=l=>({energy_overlimit:"能耗超标",device_offline:"设备离线",data_abnormal:"数据异常",device_fault:"设备故障",threshold_alert:"阈值预警"})[l]||l,j=l=>({energy_overlimit:"warning",device_offline:"danger",data_abnormal:"info",device_fault:"danger",threshold_alert:"warning"})[l]||"info",Z=l=>({pending:"待处理",processing:"处理中",resolved:"已解决",closed:"已关闭"})[l]||l,V=l=>({pending:"danger",processing:"warning",resolved:"success",closed:"info"})[l]||"info",N=l=>l.status==="pending"?"primary":l.status==="processing"?"success":"info",U=l=>l.status==="pending"?"处理":l.status==="processing"?"解决":"查看",H=l=>l.status==="resolved"||l.status==="closed",o=l=>{if(!l)return"--";const r=new Date(l);return`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")} ${String(r.getHours()).padStart(2,"0")}:${String(r.getMinutes()).padStart(2,"0")}:${String(r.getSeconds()).padStart(2,"0")}`},I=l=>({actualValue:"实际值",threshold:"阈值",unit:"单位",duration:"持续时间",timestamp:"发生时间",location:"位置"})[l]||l,ee=(l,r)=>l==="timestamp"?o(r):r,te=l=>{l.isRead||(l.isRead=!0,C.success("预警已标记为已读")),Y(l)},le=l=>{m.value=l},Y=l=>{w.value={...l},Object.assign(f,{status:"processing",handler:"",note:""}),k.value=!0},se=l=>{Y(l)},ae=()=>{if(!w.value)return;if(!f.handler){C.warning("请输入处理人");return}const l={status:f.status,handler:f.handler,note:f.note,time:new Date().toISOString()},r=i.value.findIndex(_=>_.id===w.value.id);r!==-1&&(i.value[r].status=f.status,i.value[r].handler=f.handler,i.value[r].updatedAt=new Date().toISOString(),i.value[r].processRecords||(i.value[r].processRecords=[]),i.value[r].processRecords.push(l),C.success("预警处理成功")),w.value={...i.value[r]},(f.status==="resolved"||f.status==="closed")&&(k.value=!1)},oe=()=>{w.value&&Se.confirm("确定要将此预警标记为已解决吗？","确认操作",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success"}).then(()=>{const l={status:"resolved",handler:f.handler||"系统管理员",note:"已解决问题",time:new Date().toISOString()},r=i.value.findIndex(_=>_.id===w.value.id);r!==-1&&(i.value[r].status="resolved",i.value[r].updatedAt=new Date().toISOString(),i.value[r].processRecords||(i.value[r].processRecords=[]),i.value[r].processRecords.push(l),C.success("预警已标记为已解决")),k.value=!1}).catch(()=>{})},ne=()=>{if(m.value.length===0){C.warning("请先选择要处理的预警");return}const l=m.value.filter(r=>r.status==="pending");if(l.length===0){C.warning("只能批量处理待处理状态的预警");return}m.value=l,Object.assign(A,{status:"processing",handler:"",note:""}),T.value=!0},re=()=>{if(!A.handler){C.warning("请输入处理人");return}const l={status:A.status,handler:A.handler,note:A.note,time:new Date().toISOString()};m.value.forEach(r=>{const _=i.value.findIndex(q=>q.id===r.id);_!==-1&&(i.value[_].status=A.status,i.value[_].handler=A.handler,i.value[_].updatedAt=new Date().toISOString(),i.value[_].processRecords||(i.value[_].processRecords=[]),i.value[_].processRecords.push(l))}),C.success(`成功处理 ${m.value.length} 条预警`),T.value=!1,m.value=[]},ie=()=>{y.value=!0,setTimeout(()=>{G(),C.success("预警列表已刷新"),y.value=!1},1e3)},de=()=>{w.value=null,k.value=!1},ce=l=>{E.value=l},ue=l=>{M.value=l},G=()=>{const l=new Date;i.value=[{id:"ALERT-20231101-001",title:"A栋3层电表读数异常升高",severity:"critical",type:"energy_overlimit",zoneName:"A栋",deviceName:"A栋电表1",deviceId:"DEV-E0001",status:"pending",description:"A栋3层电表读数在过去30分钟内异常升高，当前值已超过阈值的150%，可能存在线路故障或设备异常。",data:{actualValue:1850,threshold:1200,unit:"kWh",duration:"30分钟",timestamp:new Date(l.getTime()-30*6e4).toISOString(),location:"A栋3层"},suggestion:`1. 立即派遣运维人员前往现场检查
2. 检查线路是否存在短路或过载情况
3. 核查该区域设备运行状态`,similarAlerts:[{id:"ALERT-20231015-008",createdAt:"2023-10-15T09:30:00Z",status:"resolved",handler:"王工"},{id:"ALERT-20230922-012",createdAt:"2023-09-22T14:20:00Z",status:"resolved",handler:"李工"}],isRead:!1,createdAt:new Date(l.getTime()-30*6e4).toISOString(),updatedAt:new Date(l.getTime()-30*6e4).toISOString(),handler:null,processRecords:[]},{id:"ALERT-20231101-002",title:"B栋水表2号设备离线",severity:"warning",type:"device_offline",zoneName:"B栋",deviceName:"B栋水表2",deviceId:"DEV-W0002",status:"pending",description:"B栋水表2号设备于10分钟前与系统断开连接，无法获取实时数据。",data:{lastOnlineTime:new Date(l.getTime()-10*6e4).toISOString(),duration:"10分钟",location:"B栋2层"},suggestion:`1. 检查设备供电是否正常
2. 检查网络连接是否稳定
3. 尝试远程重启设备`,similarAlerts:[{id:"ALERT-20231028-015",createdAt:"2023-10-28T16:45:00Z",status:"resolved",handler:"赵工"}],isRead:!0,createdAt:new Date(l.getTime()-10*6e4).toISOString(),updatedAt:new Date(l.getTime()-10*6e4).toISOString(),handler:null,processRecords:[]},{id:"ALERT-20231101-003",title:"C栋燃气表数据异常波动",severity:"info",type:"data_abnormal",zoneName:"C栋",deviceName:"C栋燃气表1",deviceId:"DEV-G0001",status:"processing",description:"C栋燃气表数据在过去1小时内出现不规则波动，建议进行数据校验。",data:{minValue:5.2,maxValue:8.7,avgValue:6.8,unit:"m³",duration:"1小时",timestamp:new Date(l.getTime()-60*6e4).toISOString(),location:"C栋1层"},suggestion:`1. 检查数据采集系统
2. 确认设备传感器是否正常
3. 与历史数据进行对比分析`,similarAlerts:[],isRead:!0,createdAt:new Date(l.getTime()-60*6e4).toISOString(),updatedAt:new Date(l.getTime()-30*6e4).toISOString(),handler:"刘工",processRecords:[{status:"processing",handler:"刘工",note:"正在检查数据采集系统",time:new Date(l.getTime()-30*6e4).toISOString()}]},{id:"ALERT-20231101-004",title:"D栋电表3号设备故障",severity:"warning",type:"device_fault",zoneName:"D栋",deviceName:"D栋电表3",deviceId:"DEV-E0003",status:"resolved",description:"D栋电表3号设备出现通信故障，无法正常上报数据。",data:{errorCode:"ERR-COM-003",lastDataTime:new Date(l.getTime()-120*6e4).toISOString(),duration:"2小时",location:"D栋4层"},suggestion:`1. 更换设备通信模块
2. 检查RS485通信线路
3. 重新配置设备参数`,similarAlerts:[{id:"ALERT-20231005-022",createdAt:"2023-10-05T10:15:00Z",status:"resolved",handler:"孙工"}],isRead:!0,createdAt:new Date(l.getTime()-120*6e4).toISOString(),updatedAt:new Date(l.getTime()-60*6e4).toISOString(),handler:"张工",processRecords:[{status:"processing",handler:"张工",note:"前往现场检查设备",time:new Date(l.getTime()-90*6e4).toISOString()},{status:"resolved",handler:"张工",note:"已更换通信模块，设备恢复正常",time:new Date(l.getTime()-60*6e4).toISOString()}]},{id:"ALERT-20231101-005",title:"停车场能耗接近阈值",severity:"info",type:"threshold_alert",zoneName:"停车场",deviceName:"停车场电表1",deviceId:"DEV-E0006",status:"pending",description:"停车场能耗已达到日阈值的85%，请注意监控。",data:{actualValue:2550,threshold:3e3,unit:"kWh",percentage:85,timestamp:new Date(l.getTime()-15*6e4).toISOString(),location:"地下停车场"},suggestion:`1. 检查停车场照明系统
2. 优化空调运行策略
3. 确保节能措施有效执行`,similarAlerts:[],isRead:!1,createdAt:new Date(l.getTime()-15*6e4).toISOString(),updatedAt:new Date(l.getTime()-15*6e4).toISOString(),handler:null,processRecords:[]}]};return Ae(()=>{G()}),{severityFilter:P,statusFilter:t,typeFilter:B,dateRangeFilter:e,searchKeyword:D,currentPage:M,pageSize:E,loading:y,selectedAlerts:m,selectedAlert:w,alertDetailDialogVisible:k,bulkProcessDialogVisible:T,alerts:i,processForm:f,bulkProcessForm:A,filteredAlerts:g,criticalAlertCount:x,warningAlertCount:W,infoAlertCount:R,totalAlertCount:v,getSeverityText:b,getSeverityTagType:L,getTypeText:K,getTypeTagType:j,getStatusText:Z,getStatusTagType:V,getActionButtonType:N,getActionButtonText:U,isAlertProcessed:H,formatDateTime:o,getFieldLabel:I,formatFieldValue:ee,handleAlertClick:te,handleSelectionChange:le,viewAlertDetail:Y,processAlert:se,confirmProcessAlert:ae,markAsResolved:oe,handleBulkProcessAlert:ne,confirmBulkProcess:re,refreshAlerts:ie,handleDialogClose:de,handleSizeChange:ce,handleCurrentChange:ue}}},Ve={class:"alert-center"},ke={class:"page-header"},xe={class:"header-actions"},Re={class:"alert-stats"},Ie={class:"stat-content"},Fe={class:"stat-number"},Oe={class:"stat-icon"},ze={class:"stat-content"},Pe={class:"stat-number"},Be={class:"stat-icon"},Ee={class:"stat-content"},Le={class:"stat-number"},Ne={class:"stat-icon"},Ue={class:"stat-content"},Me={class:"stat-number"},We={class:"stat-icon"},Ke={class:"toolbar"},je={class:"filter-section"},Ze={class:"search-section"},He={class:"alert-title-wrapper"},Ye={class:"pagination-wrapper"},qe={key:0,class:"alert-detail"},Ge={class:"detail-header"},Xe={class:"alert-title"},Je={class:"detail-info"},Qe={class:"info-grid"},$e={class:"info-item"},et={class:"info-item"},tt={class:"info-item"},lt={class:"info-item"},st={class:"info-item"},at={class:"info-item"},ot={class:"info-item"},nt={class:"info-item"},rt={class:"detail-content"},it={class:"alert-description"},dt={class:"detail-content"},ct={class:"alert-data"},ut={class:"detail-content"},gt={class:"alert-suggestion"},mt={class:"detail-content"},vt={class:"alert-history"},pt={key:1,class:"no-data"},ft={key:0,class:"process-form"},_t={key:1,class:"process-records"},ht={key:0,class:"records-list"},yt={class:"record-header"},wt={class:"record-handler"},At={class:"record-time"},bt={class:"record-content"},St={class:"record-status"},Tt={class:"record-note"},Ct={key:1,class:"no-data"},Dt={class:"dialog-footer"},Vt={class:"bulk-process-content"},kt={class:"bulk-process-info"},xt={class:"highlight"},Rt={class:"dialog-footer"};function It(P,t,B,e,D,M){const E=c("AlarmClock"),y=c("el-icon"),m=c("el-button"),w=c("Refresh"),k=c("Warning"),T=c("el-card"),i=c("CircleClose"),f=c("InfoFilled"),A=c("Bell"),g=c("el-option"),x=c("el-select"),W=c("el-date-picker"),R=c("el-input"),v=c("el-table-column"),b=c("el-tag"),L=c("el-table"),K=c("el-pagination"),j=c("el-descriptions-item"),Z=c("el-descriptions"),V=c("el-form-item"),N=c("el-form"),U=c("el-dialog"),H=be("loading");return p(),S("div",Ve,[a("div",ke,[t[19]||(t[19]=a("h1",null,"异常预警中心",-1)),a("div",xe,[s(m,{type:"danger",onClick:e.handleBulkProcessAlert},{default:n(()=>[s(y,null,{default:n(()=>[s(E)]),_:1}),t[17]||(t[17]=u(" 批量处理 ",-1))]),_:1},8,["onClick"]),s(m,{onClick:e.refreshAlerts},{default:n(()=>[s(y,null,{default:n(()=>[s(w)]),_:1}),t[18]||(t[18]=u(" 刷新 ",-1))]),_:1},8,["onClick"])])]),a("div",Re,[s(T,{class:"stat-card critical"},{default:n(()=>[a("div",Ie,[a("div",Fe,d(e.criticalAlertCount),1),t[20]||(t[20]=a("div",{class:"stat-label"},"紧急预警",-1))]),a("div",Oe,[s(y,{class:"icon-large"},{default:n(()=>[s(k)]),_:1})])]),_:1}),s(T,{class:"stat-card warning"},{default:n(()=>[a("div",ze,[a("div",Pe,d(e.warningAlertCount),1),t[21]||(t[21]=a("div",{class:"stat-label"},"警告预警",-1))]),a("div",Be,[s(y,{class:"icon-large"},{default:n(()=>[s(i)]),_:1})])]),_:1}),s(T,{class:"stat-card info"},{default:n(()=>[a("div",Ee,[a("div",Le,d(e.infoAlertCount),1),t[22]||(t[22]=a("div",{class:"stat-label"},"提示预警",-1))]),a("div",Ne,[s(y,{class:"icon-large"},{default:n(()=>[s(f)]),_:1})])]),_:1}),s(T,{class:"stat-card total"},{default:n(()=>[a("div",Ue,[a("div",Me,d(e.totalAlertCount),1),t[23]||(t[23]=a("div",{class:"stat-label"},"今日预警",-1))]),a("div",We,[s(y,{class:"icon-large"},{default:n(()=>[s(A)]),_:1})])]),_:1})]),a("div",Ke,[a("div",je,[s(x,{modelValue:e.severityFilter,"onUpdate:modelValue":t[0]||(t[0]=o=>e.severityFilter=o),placeholder:"预警级别",clearable:"",style:{width:"120px","margin-right":"15px"}},{default:n(()=>[s(g,{label:"紧急",value:"critical"}),s(g,{label:"警告",value:"warning"}),s(g,{label:"提示",value:"info"})]),_:1},8,["modelValue"]),s(x,{modelValue:e.statusFilter,"onUpdate:modelValue":t[1]||(t[1]=o=>e.statusFilter=o),placeholder:"处理状态",clearable:"",style:{width:"120px","margin-right":"15px"}},{default:n(()=>[s(g,{label:"待处理",value:"pending"}),s(g,{label:"处理中",value:"processing"}),s(g,{label:"已解决",value:"resolved"}),s(g,{label:"已关闭",value:"closed"})]),_:1},8,["modelValue"]),s(x,{modelValue:e.typeFilter,"onUpdate:modelValue":t[2]||(t[2]=o=>e.typeFilter=o),placeholder:"预警类型",clearable:"",style:{width:"150px","margin-right":"15px"}},{default:n(()=>[s(g,{label:"能耗超标",value:"energy_overlimit"}),s(g,{label:"设备离线",value:"device_offline"}),s(g,{label:"数据异常",value:"data_abnormal"}),s(g,{label:"设备故障",value:"device_fault"}),s(g,{label:"阈值预警",value:"threshold_alert"})]),_:1},8,["modelValue"]),s(W,{modelValue:e.dateRangeFilter,"onUpdate:modelValue":t[3]||(t[3]=o=>e.dateRangeFilter=o),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",style:{width:"280px"}},null,8,["modelValue"])]),a("div",Ze,[s(R,{modelValue:e.searchKeyword,"onUpdate:modelValue":t[4]||(t[4]=o=>e.searchKeyword=o),placeholder:"搜索预警信息、设备或区域","prefix-icon":"el-icon-search",clearable:"",style:{width:"300px"}},null,8,["modelValue"])])]),s(T,{class:"alerts-table-card"},{default:n(()=>[Te((p(),F(L,{data:e.filteredAlerts,style:{width:"100%"},border:"",onRowClick:e.handleAlertClick,onSelectionChange:e.handleSelectionChange},{default:n(()=>[s(v,{type:"selection",width:"55","reserve-selection":!0}),s(v,{prop:"severity",label:"级别",width:"80",fixed:"left"},{default:n(o=>[s(b,{type:e.getSeverityTagType(o.row.severity)},{default:n(()=>[u(d(e.getSeverityText(o.row.severity)),1)]),_:2},1032,["type"])]),_:1}),s(v,{prop:"title",label:"预警标题","min-width":"200"},{default:n(o=>[a("div",He,[a("span",{class:Ce({unread:!o.row.isRead})},d(o.row.title),3),o.row.isRead?O("",!0):(p(),F(b,{key:0,type:"danger",size:"small",effect:"dark",style:{"margin-left":"5px"}},{default:n(()=>[...t[24]||(t[24]=[u(" 未读 ",-1)])]),_:1}))])]),_:1}),s(v,{prop:"type",label:"类型",width:"120"},{default:n(o=>[s(b,{size:"small",type:e.getTypeTagType(o.row.type)},{default:n(()=>[u(d(e.getTypeText(o.row.type)),1)]),_:2},1032,["type"])]),_:1}),s(v,{prop:"zoneName",label:"区域",width:"100"}),s(v,{prop:"deviceName",label:"设备",width:"150"}),s(v,{prop:"status",label:"状态",width:"100",align:"center"},{default:n(o=>[s(b,{type:e.getStatusTagType(o.row.status)},{default:n(()=>[u(d(e.getStatusText(o.row.status)),1)]),_:2},1032,["type"])]),_:1}),s(v,{prop:"createdAt",label:"创建时间",width:"160",align:"center"},{default:n(o=>[u(d(e.formatDateTime(o.row.createdAt)),1)]),_:1}),s(v,{prop:"handler",label:"处理人",width:"100"},{default:n(o=>[u(d(o.row.handler||"--"),1)]),_:1}),s(v,{label:"操作",width:"180",fixed:"right"},{default:n(o=>[s(m,{size:"small",type:"primary",onClick:J(I=>e.viewAlertDetail(o.row),["stop"])},{default:n(()=>[...t[25]||(t[25]=[u("详情",-1)])]),_:1},8,["onClick"]),s(m,{size:"small",type:e.getActionButtonType(o.row),onClick:J(I=>e.processAlert(o.row),["stop"]),disabled:e.isAlertProcessed(o.row)},{default:n(()=>[u(d(e.getActionButtonText(o.row)),1)]),_:2},1032,["type","onClick","disabled"])]),_:1})]),_:1},8,["data","onRowClick","onSelectionChange"])),[[H,e.loading]]),a("div",Ye,[s(K,{"current-page":e.currentPage,"onUpdate:currentPage":t[5]||(t[5]=o=>e.currentPage=o),"page-size":e.pageSize,"onUpdate:pageSize":t[6]||(t[6]=o=>e.pageSize=o),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:e.filteredAlerts.length,onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])]),_:1}),s(U,{modelValue:e.alertDetailDialogVisible,"onUpdate:modelValue":t[11]||(t[11]=o=>e.alertDetailDialogVisible=o),title:"预警详情",width:"700px","before-close":e.handleDialogClose},{footer:n(()=>[a("span",Dt,[s(m,{onClick:t[10]||(t[10]=o=>e.alertDetailDialogVisible=!1)},{default:n(()=>[...t[40]||(t[40]=[u("关闭",-1)])]),_:1}),e.selectedAlert&&e.selectedAlert.status==="pending"?(p(),F(m,{key:0,type:"primary",onClick:e.confirmProcessAlert},{default:n(()=>[...t[41]||(t[41]=[u(" 确认处理 ",-1)])]),_:1},8,["onClick"])):O("",!0),e.selectedAlert&&e.selectedAlert.status==="processing"?(p(),F(m,{key:1,type:"success",onClick:e.markAsResolved},{default:n(()=>[...t[42]||(t[42]=[u(" 标记已解决 ",-1)])]),_:1},8,["onClick"])):O("",!0)])]),default:n(()=>[e.selectedAlert?(p(),S("div",qe,[a("div",Ge,[a("h2",Xe,d(e.selectedAlert.title),1),s(b,{type:e.getSeverityTagType(e.selectedAlert.severity)},{default:n(()=>[u(d(e.getSeverityText(e.selectedAlert.severity)),1)]),_:1},8,["type"])]),a("div",Je,[a("div",Qe,[a("div",$e,[t[26]||(t[26]=a("span",{class:"info-label"},"预警类型：",-1)),s(b,{size:"small",type:e.getTypeTagType(e.selectedAlert.type)},{default:n(()=>[u(d(e.getTypeText(e.selectedAlert.type)),1)]),_:1},8,["type"])]),a("div",et,[t[27]||(t[27]=a("span",{class:"info-label"},"处理状态：",-1)),s(b,{type:e.getStatusTagType(e.selectedAlert.status)},{default:n(()=>[u(d(e.getStatusText(e.selectedAlert.status)),1)]),_:1},8,["type"])]),a("div",tt,[t[28]||(t[28]=a("span",{class:"info-label"},"预警区域：",-1)),a("span",null,d(e.selectedAlert.zoneName),1)]),a("div",lt,[t[29]||(t[29]=a("span",{class:"info-label"},"相关设备：",-1)),a("span",null,d(e.selectedAlert.deviceName),1)]),a("div",st,[t[30]||(t[30]=a("span",{class:"info-label"},"设备ID：",-1)),a("span",null,d(e.selectedAlert.deviceId),1)]),a("div",at,[t[31]||(t[31]=a("span",{class:"info-label"},"预警编号：",-1)),a("span",null,d(e.selectedAlert.id),1)]),a("div",ot,[t[32]||(t[32]=a("span",{class:"info-label"},"创建时间：",-1)),a("span",null,d(e.formatDateTime(e.selectedAlert.createdAt)),1)]),a("div",nt,[t[33]||(t[33]=a("span",{class:"info-label"},"更新时间：",-1)),a("span",null,d(e.formatDateTime(e.selectedAlert.updatedAt)),1)])])]),a("div",rt,[t[34]||(t[34]=a("h3",null,"预警描述",-1)),a("div",it,d(e.selectedAlert.description),1)]),a("div",dt,[t[35]||(t[35]=a("h3",null,"相关数据",-1)),a("div",ct,[s(Z,{column:2,border:""},{default:n(()=>[(p(!0),S(Q,null,$(e.selectedAlert.data,(o,I)=>(p(),F(j,{key:I,label:e.getFieldLabel(I)},{default:n(()=>[u(d(e.formatFieldValue(I,o)),1)]),_:2},1032,["label"]))),128))]),_:1})])]),a("div",ut,[t[36]||(t[36]=a("h3",null,"处理建议",-1)),a("div",gt,d(e.selectedAlert.suggestion),1)]),a("div",mt,[t[37]||(t[37]=a("h3",null,"同类预警历史",-1)),a("div",vt,[e.selectedAlert.similarAlerts&&e.selectedAlert.similarAlerts.length>0?(p(),F(L,{key:0,data:e.selectedAlert.similarAlerts,style:{width:"100%"},size:"small"},{default:n(()=>[s(v,{prop:"id",label:"编号",width:"150"}),s(v,{prop:"createdAt",label:"时间",width:"160"}),s(v,{prop:"status",label:"状态",width:"100"},{default:n(o=>[s(b,{size:"small",type:e.getStatusTagType(o.row.status)},{default:n(()=>[u(d(e.getStatusText(o.row.status)),1)]),_:2},1032,["type"])]),_:1}),s(v,{prop:"handler",label:"处理人",width:"100"})]),_:1},8,["data"])):(p(),S("div",pt,"暂无同类预警历史"))])]),e.selectedAlert.status==="pending"?(p(),S("div",ft,[t[38]||(t[38]=a("h3",null,"处理预警",-1)),s(N,{model:e.processForm,"label-width":"100px"},{default:n(()=>[s(V,{label:"处理状态"},{default:n(()=>[s(x,{modelValue:e.processForm.status,"onUpdate:modelValue":t[7]||(t[7]=o=>e.processForm.status=o),placeholder:"请选择处理状态"},{default:n(()=>[s(g,{label:"处理中",value:"processing"}),s(g,{label:"已解决",value:"resolved"}),s(g,{label:"已关闭",value:"closed"})]),_:1},8,["modelValue"])]),_:1}),s(V,{label:"处理人"},{default:n(()=>[s(R,{modelValue:e.processForm.handler,"onUpdate:modelValue":t[8]||(t[8]=o=>e.processForm.handler=o),placeholder:"请输入处理人姓名"},null,8,["modelValue"])]),_:1}),s(V,{label:"处理备注"},{default:n(()=>[s(R,{modelValue:e.processForm.note,"onUpdate:modelValue":t[9]||(t[9]=o=>e.processForm.note=o),placeholder:"请输入处理备注",type:"textarea",rows:4},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])):O("",!0),e.selectedAlert.status!=="pending"?(p(),S("div",_t,[t[39]||(t[39]=a("h3",null,"处理记录",-1)),e.selectedAlert.processRecords&&e.selectedAlert.processRecords.length>0?(p(),S("div",ht,[(p(!0),S(Q,null,$(e.selectedAlert.processRecords,o=>(p(),S("div",{key:o.time,class:"record-item"},[a("div",yt,[a("span",wt,d(o.handler),1),a("span",At,d(e.formatDateTime(o.time)),1)]),a("div",bt,[a("div",St,"状态更新为："+d(e.getStatusText(o.status)),1),a("div",Tt,d(o.note),1)])]))),128))])):(p(),S("div",Ct,"暂无处理记录"))])):O("",!0)])):O("",!0)]),_:1},8,["modelValue","before-close"]),s(U,{modelValue:e.bulkProcessDialogVisible,"onUpdate:modelValue":t[16]||(t[16]=o=>e.bulkProcessDialogVisible=o),title:"批量处理预警",width:"500px"},{footer:n(()=>[a("span",Rt,[s(m,{onClick:t[15]||(t[15]=o=>e.bulkProcessDialogVisible=!1)},{default:n(()=>[...t[45]||(t[45]=[u("取消",-1)])]),_:1}),s(m,{type:"primary",onClick:e.confirmBulkProcess},{default:n(()=>[...t[46]||(t[46]=[u("确认处理",-1)])]),_:1},8,["onClick"])])]),default:n(()=>[a("div",Vt,[a("p",kt,[t[43]||(t[43]=u(" 您正在批量处理 ",-1)),a("span",xt,d(e.selectedAlerts.length),1),t[44]||(t[44]=u(" 条预警 ",-1))]),s(N,{model:e.bulkProcessForm,"label-width":"100px"},{default:n(()=>[s(V,{label:"处理状态",prop:"status"},{default:n(()=>[s(x,{modelValue:e.bulkProcessForm.status,"onUpdate:modelValue":t[12]||(t[12]=o=>e.bulkProcessForm.status=o),placeholder:"请选择处理状态"},{default:n(()=>[s(g,{label:"处理中",value:"processing"}),s(g,{label:"已解决",value:"resolved"}),s(g,{label:"已关闭",value:"closed"})]),_:1},8,["modelValue"])]),_:1}),s(V,{label:"处理人",prop:"handler"},{default:n(()=>[s(R,{modelValue:e.bulkProcessForm.handler,"onUpdate:modelValue":t[13]||(t[13]=o=>e.bulkProcessForm.handler=o),placeholder:"请输入处理人姓名"},null,8,["modelValue"])]),_:1}),s(V,{label:"处理备注",prop:"note"},{default:n(()=>[s(R,{modelValue:e.bulkProcessForm.note,"onUpdate:modelValue":t[14]||(t[14]=o=>e.bulkProcessForm.note=o),placeholder:"请输入处理备注",type:"textarea",rows:3},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1},8,["modelValue"])])}const Ot=ve(De,[["render",It],["__scopeId","data-v-8615419d"]]);export{Ot as default};
