import{_ as F,e as C,r as y,f as k,g as d,o as x,c as R,a as m,h as o,i as l,E as p,j as a,t as q}from"./index-45cd1a9a.js";const N={name:"Register",setup(){const c=C(),e=y(null),f=y(!1),r=y(0);let V=null;const u=k({companyName:"",username:"",phone:"",smsCode:"",password:"",confirmPassword:"",role:"enterprise",agreed:!1});return{registerFormRef:e,registerForm:u,rules:{companyName:[{required:!0,message:"请输入企业名称",trigger:"blur"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度在3-20个字符之间",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号",trigger:"blur"}],smsCode:[{required:!0,message:"请输入验证码",trigger:"blur"},{pattern:/^\d{6}$/,message:"请输入6位验证码",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"密码长度在6-20个字符之间",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(g,n,_)=>{n!==u.password?_(new Error("两次输入的密码不一致")):_()},trigger:"blur"}],role:[{required:!0,message:"请选择用户角色",trigger:"change"}],agreed:[{required:!0,message:"请阅读并同意用户协议和隐私政策",trigger:"change"}]},loading:f,countdown:r,sendVerificationCode:()=>{if(!u.phone){p.warning("请输入手机号");return}if(!/^1[3-9]\d{9}$/.test(u.phone)){p.warning("请输入正确的手机号");return}p.success("验证码已发送"),r.value=60,V=setInterval(()=>{r.value>0?r.value--:clearInterval(V)},1e3)},toLogin:()=>{c.push("/login")},handleRegister:async()=>{e.value&&await e.value.validate(async g=>{if(g){f.value=!0;try{await new Promise(n=>setTimeout(n,1500)),p.success("注册成功！即将跳转到登录页面"),setTimeout(()=>{c.push("/login")},1500)}catch{p.error("注册失败，请稍后重试")}finally{f.value=!1}}})}}}},U={class:"register-container"},P={class:"register-form-wrapper"},E={class:"login-link"};function B(c,e,f,r,V,u){const i=d("el-input"),t=d("el-form-item"),b=d("el-button"),w=d("el-radio-button"),g=d("el-radio-group"),n=d("el-link"),_=d("el-checkbox"),v=d("el-form");return x(),R("div",U,[m("div",P,[e[17]||(e[17]=m("div",{class:"logo-area"},[m("h1",{class:"logo-title"},"注册账号"),m("p",{class:"logo-subtitle"},"加入智慧园区能源管理系统")],-1)),o(v,{ref:"registerFormRef",model:r.registerForm,rules:r.rules,class:"register-form"},{default:l(()=>[o(t,{label:"企业名称",prop:"companyName"},{default:l(()=>[o(i,{modelValue:r.registerForm.companyName,"onUpdate:modelValue":e[0]||(e[0]=s=>r.registerForm.companyName=s),placeholder:"请输入企业名称"},null,8,["modelValue"])]),_:1}),o(t,{label:"用户名",prop:"username"},{default:l(()=>[o(i,{modelValue:r.registerForm.username,"onUpdate:modelValue":e[1]||(e[1]=s=>r.registerForm.username=s),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),o(t,{label:"手机号",prop:"phone"},{default:l(()=>[o(i,{modelValue:r.registerForm.phone,"onUpdate:modelValue":e[2]||(e[2]=s=>r.registerForm.phone=s),placeholder:"请输入手机号"},{append:l(()=>[o(b,{disabled:r.countdown>0,type:"text",onClick:r.sendVerificationCode},{default:l(()=>[a(q(r.countdown>0?`${r.countdown}s后重发`:"发送验证码"),1)]),_:1},8,["disabled","onClick"])]),_:1},8,["modelValue"])]),_:1}),o(t,{label:"验证码",prop:"smsCode"},{default:l(()=>[o(i,{modelValue:r.registerForm.smsCode,"onUpdate:modelValue":e[3]||(e[3]=s=>r.registerForm.smsCode=s),placeholder:"请输入验证码"},null,8,["modelValue"])]),_:1}),o(t,{label:"密码",prop:"password"},{default:l(()=>[o(i,{modelValue:r.registerForm.password,"onUpdate:modelValue":e[4]||(e[4]=s=>r.registerForm.password=s),type:"password",placeholder:"请输入密码（6-20位字母、数字或符号）","show-password":""},null,8,["modelValue"])]),_:1}),o(t,{label:"确认密码",prop:"confirmPassword"},{default:l(()=>[o(i,{modelValue:r.registerForm.confirmPassword,"onUpdate:modelValue":e[5]||(e[5]=s=>r.registerForm.confirmPassword=s),type:"password",placeholder:"请再次输入密码","show-password":""},null,8,["modelValue"])]),_:1}),o(t,{label:"用户角色",prop:"role"},{default:l(()=>[o(g,{modelValue:r.registerForm.role,"onUpdate:modelValue":e[6]||(e[6]=s=>r.registerForm.role=s)},{default:l(()=>[o(w,{label:"enterprise"},{default:l(()=>[...e[8]||(e[8]=[a("企业用户",-1)])]),_:1}),o(w,{label:"operator"},{default:l(()=>[...e[9]||(e[9]=[a("运维人员",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(t,null,{default:l(()=>[o(_,{modelValue:r.registerForm.agreed,"onUpdate:modelValue":e[7]||(e[7]=s=>r.registerForm.agreed=s)},{default:l(()=>[e[12]||(e[12]=a(" 我已阅读并同意 ",-1)),o(n,{type:"primary"},{default:l(()=>[...e[10]||(e[10]=[a("《用户协议》",-1)])]),_:1}),e[13]||(e[13]=a(" 和 ",-1)),o(n,{type:"primary"},{default:l(()=>[...e[11]||(e[11]=[a("《隐私政策》",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(t,null,{default:l(()=>[o(b,{type:"primary",class:"register-btn",loading:r.loading,onClick:r.handleRegister},{default:l(()=>[...e[14]||(e[14]=[a(" 注册 ",-1)])]),_:1},8,["loading","onClick"])]),_:1}),m("div",E,[e[16]||(e[16]=m("span",null,"已有账号？",-1)),o(n,{type:"primary",underline:!1,onClick:r.toLogin},{default:l(()=>[...e[15]||(e[15]=[a(" 立即登录 ",-1)])]),_:1},8,["onClick"])])]),_:1},8,["model","rules"])])])}const L=F(N,[["render",B],["__scopeId","data-v-1325fcc4"]]);export{L as default};
