import{_ as c,u as _,r,o as f,c as b,a as e,w as d,v as p,b as v,d as y,t as S}from"./index-45cd1a9a.js";const I={class:"login-page"},w={class:"login-box"},k={class:"login-form"},x={class:"form-group"},L={class:"form-group"},D={class:"form-group"},U=["disabled"],V={__name:"Login",setup(B){const m=_(),t=r(""),s=r(""),i=r("admin"),n=r(!1),u=async()=>{if(localStorage.removeItem("token"),localStorage.removeItem("userInfo"),localStorage.removeItem("isLoggedIn"),!t.value||!s.value){alert("请输入账号和密码");return}n.value=!0;try{const a={admin:"123456",enterprise:"123456",operator:"123456"};if(s.value==="123456"&&a[t.value]){const o=t.value;i.value=o;const l="smart_park_token_"+Date.now(),g={username:t.value,role:o,loginTime:new Date().toISOString()};console.log("登录成功，更新userStore"),m.login(g,l),localStorage.setItem("isLoggedIn","true"),console.log("登录成功，正在跳转..."),setTimeout(()=>{window.location.href="/dashboard"},100)}else alert("账号或密码错误，请使用默认账号登录")}catch(a){console.error("登录错误:",a),alert("登录失败，请重试")}finally{n.value=!1}};return(a,o)=>(f(),b("div",I,[e("div",w,[o[8]||(o[8]=e("div",{class:"login-header"},[e("h1",null,"智慧园区管理系统"),e("p",null,"登录入口")],-1)),e("div",k,[e("div",x,[o[3]||(o[3]=e("label",null,"账号",-1)),d(e("input",{"onUpdate:modelValue":o[0]||(o[0]=l=>t.value=l),type:"text",placeholder:"请输入账号",class:"form-input",onKeyup:v(u,["enter"])},null,544),[[p,t.value]])]),e("div",L,[o[4]||(o[4]=e("label",null,"密码",-1)),d(e("input",{"onUpdate:modelValue":o[1]||(o[1]=l=>s.value=l),type:"password",placeholder:"请输入密码",class:"form-input",onKeyup:v(u,["enter"])},null,544),[[p,s.value]])]),e("div",D,[o[6]||(o[6]=e("label",null,"角色",-1)),d(e("select",{"onUpdate:modelValue":o[2]||(o[2]=l=>i.value=l),class:"form-input"},[...o[5]||(o[5]=[e("option",{value:"admin"},"管理员",-1),e("option",{value:"enterprise"},"企业用户",-1),e("option",{value:"operator"},"运维人员",-1)])],512),[[y,i.value]])]),e("button",{class:"login-btn",onClick:u,disabled:n.value},S(n.value?"登录中...":"登录"),9,U),o[7]||(o[7]=e("div",{class:"login-tips"},[e("p",null,"提示：使用以下账号登录"),e("p",null,"• 管理员：admin / 123456"),e("p",null,"• 企业用户：enterprise / 123456"),e("p",null,"• 运维人员：operator / 123456")],-1))])])]))}},T=c(V,[["__scopeId","data-v-43706b0b"]]);export{T as default};
